<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¡œê·¸ì¸ - ì—¬ê¸°ì €ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ (í•„ìˆ˜) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <link rel="stylesheet" href="styles.css">
    <script>
        tailwind.config = {
            theme: { extend: { colors: { primary: '#000', accent: '#FF385C' } } }
        }
    </script>
</head>
<body class="bg-gray-50 h-screen flex items-center justify-center p-6">

    <div class="w-full max-w-md bg-white rounded-3xl shadow-xl p-8 md:p-10 animate-fade-in relative">
        <a href="index.html" class="absolute top-6 right-6 text-gray-400 hover:text-black">
            <i data-lucide="x" width="24"></i>
        </a>
        <div class="text-center mb-10">
            <h1 class="text-3xl font-black mb-2 tracking-tight">ì—¬ê¸°ì €ê¸°</h1>
            <p class="text-gray-500">ë‚˜ë§Œì˜ ì—¬í–‰ íë ˆì´ì…˜ì„ ì‹œì‘í•´ë³´ì„¸ìš”.</p>
        </div>

        <div class="space-y-4">
            <!-- type="button" ì¶”ê°€ (ì¤‘ìš”: í¼ ì œì¶œ ë°©ì§€) -->
            <button type="button" id="btn-google" class="w-full py-3.5 px-4 rounded-xl border border-gray-200 flex items-center justify-center gap-3 hover:bg-gray-50 transition-colors relative">
                <img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google" class="w-5 h-5" />
                <span class="font-bold text-gray-700">Googleë¡œ ì‹œì‘í•˜ê¸°</span>
            </button>
            
            <div class="relative py-4">
                <div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-100"></div></div>
                <div class="relative flex justify-center text-xs"><span class="px-2 bg-white text-gray-400">ë˜ëŠ” ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸</span></div>
            </div>

            <form id="form-login" class="space-y-4">
                <div><input id="input-email" type="email" placeholder="ì´ë©”ì¼ ì£¼ì†Œ" class="w-full px-4 py-3 rounded-xl bg-gray-50 border-gray-100 border focus:border-black focus:bg-white focus:outline-none transition-colors text-sm" required></div>
                <div><input id="input-password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" class="w-full px-4 py-3 rounded-xl bg-gray-50 border-gray-100 border focus:border-black focus:bg-white focus:outline-none transition-colors text-sm" required></div>
                <button type="submit" id="btn-submit" class="w-full py-3.5 bg-black text-white rounded-xl font-bold hover:bg-gray-800 transition-colors shadow-lg shadow-gray-200 disabled:bg-gray-400">ë¡œê·¸ì¸</button>
            </form>
        </div>
        <div class="mt-8 text-center text-xs text-gray-400">
            <a href="#" class="underline hover:text-black">íšŒì›ê°€ì…</a>
        </div>
    </div>

    <!-- script.jsê°€ ìˆìœ¼ë©´ ë¡œë“œí•˜ë˜, ì—†ì–´ë„ ì‘ë™í•˜ê²Œ ë¶„ë¦¬ -->
    <script src="script.js"></script>
    
    <!-- ê¸°ì¡´ <script src="script.js"></script>ê°€ ìˆë‹¤ë©´ ì§€ìš°ê±°ë‚˜ ì£¼ì„ ì²˜ë¦¬í•´ì£¼ì„¸ìš” -->
    <!-- <script src="script.js"></script> -->
    
    <script>
        // ì•„ì´ì½˜ ìƒì„±
        if(window.lucide) lucide.createIcons();

        // ------------------------------------------------------------------
        // [ì§„ë‹¨ 1] Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ í™•ì¸
        // ------------------------------------------------------------------
        if (typeof window.supabase === 'undefined') {
            alert("ğŸš¨ ì¹˜ëª…ì  ì˜¤ë¥˜: Supabase ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
            throw new Error("Supabase Library Not Loaded");
        }

        const SUPABASE_URL = 'https://ozhieovgrmnehaimuyni.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im96aGllb3Zncm1uZWhhaW11eW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzgwODksImV4cCI6MjA4NDU1NDA4OX0.haULDDCnJXw4zwFeJSQKhS1Jun4CRFCziGgKQKVwmyY'; 
        
        // [ìˆ˜ì •] ë³€ìˆ˜ ì´ë¦„ ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ 'supabase' -> 'supabaseClient'ë¡œ ë³€ê²½
        const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const btnGoogle = document.getElementById('btn-google');
        const btnKakao = document.getElementById('btn-kakao');

        async function handleSocialLogin(provider) {
            console.log(`[${provider}] ë¡œê·¸ì¸ ì‹œë„ ì¤‘...`); 
            
            try {
                // [ìˆ˜ì •] supabase -> supabaseClient ì‚¬ìš©
                const { data, error } = await supabaseClient.auth.signInWithOAuth({
                    provider: provider,
                    options: {
                        // â–¼ ì£¼ì†Œì°½ì˜ ì£¼ì†Œì™€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤!
                        redirectTo: 'http://127.0.0.1:5500/t3Project/html/index.html',
                        queryParams: {
                            access_type: 'offline',
                            prompt: 'consent',
                        },
                    }
                });

                if (error) {
                    console.error("Supabase ì—ëŸ¬:", error);
                    alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: " + error.message); // ì—ëŸ¬ ë°œìƒ ì‹œ ì•Œë¦¼ ë„ì›€
                    throw error;
                }
                
                console.log("ë¡œê·¸ì¸ ìš”ì²­ ì„±ê³µ! ë¦¬ë‹¤ì´ë ‰íŠ¸ ëŒ€ê¸°...", data);

            } catch (error) {
                console.error(error);
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
        if(btnGoogle) {
            btnGoogle.addEventListener('click', (e) => {
                e.preventDefault();
                handleSocialLogin('google');
            });
        }
        if(btnKakao) {
            btnKakao.addEventListener('click', (e) => {
                e.preventDefault();
                handleSocialLogin('kakao');
            });
        }
    </script>
</body>
</html>